<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>TRON Descanso ULTRA</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body, html { width: 100%; height: 100%; overflow: hidden; background: #000; }
    canvas { display: block; }
  </style>
</head>
<body>
<canvas id="canvas"></canvas>

<script>
const canvas = document.getElementById('canvas');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const beep = new AudioContext();
function playBeep() {
  const osc = beep.createOscillator();
  osc.type = 'square';
  osc.frequency.value = 440;
  osc.connect(beep.destination);
  osc.start();
  osc.stop(beep.currentTime + 0.1);
}

const colors = ['#0ff', '#f0f', '#ff0', '#0f0', '#f00', '#00f', '#fff'];
const cycles = [];

for(let i=0; i<10; i++) {
  cycles.push(newCycle());
}

function newCycle() {
  return {
    x: Math.random() * canvas.width,
    y: Math.random() * canvas.height,
    dir: Math.random() * 2 * Math.PI,
    speed: 2 + Math.random()*3,
    color: colors[Math.floor(Math.random() * colors.length)],
    trail: [],
    alive: true
  };
}

function drawGlowLine(trail, color) {
  ctx.beginPath();
  ctx.moveTo(trail[0].x, trail[0].y);
  for (let i = 1; i < trail.length; i++) {
    ctx.lineTo(trail[i].x, trail[i].y);
  }
  ctx.strokeStyle = color;
  ctx.shadowColor = color;
  ctx.shadowBlur = 10;
  ctx.lineWidth = 2;
  ctx.stroke();
  ctx.shadowBlur = 0;
}

function explode(x, y, color) {
  for(let i=0; i<20; i++) {
    let angle = Math.random() * 2 * Math.PI;
    let speed = Math.random() * 5;
    particles.push({x, y, dx: Math.cos(angle)*speed, dy: Math.sin(angle)*speed, life: 50, color});
  }
}

const particles = [];

function draw() {
  ctx.fillStyle = 'rgba(0,0,0,0.2)';
  ctx.fillRect(0, 0, canvas.width, canvas.height);

  cycles.forEach((c, idx) => {
    if(!c.alive) return;

    c.trail.push({x: c.x, y: c.y});
    if (c.trail.length > 100) c.trail.shift();

    c.x += Math.cos(c.dir) * c.speed;
    c.y += Math.sin(c.dir) * c.speed;

    if (Math.random() < 0.02) {
      c.dir += (Math.random() - 0.5) * Math.PI / 2;
      playBeep();
    }

    drawGlowLine(c.trail, c.color);

    if (c.x < 0 || c.x > canvas.width || c.y < 0 || c.y > canvas.height) {
      explode(c.x, c.y, c.color);
      c.alive = false;
      setTimeout(() => { cycles[idx] = newCycle(); }, 1000);
    }
  });

  particles.forEach(p => {
    p.x += p.dx;
    p.y += p.dy;
    p.life--;
    ctx.beginPath();
    ctx.arc(p.x, p.y, 2, 0, Math.PI*2);
    ctx.fillStyle = p.color;
    ctx.fill();
  });
  
  for(let i=particles.length-1; i>=0; i--) {
    if(particles[i].life <= 0) particles.splice(i,1);
  }

  requestAnimationFrame(draw);
}

draw();

window.addEventListener('resize', () => {
  canvas.width = window.innerWidth;
  canvas.height = window.innerHeight;
});
</script>
</body>
</html>
